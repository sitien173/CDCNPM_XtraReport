/**
* DevExpress Analytics (query-builder\wizard\internal\_selectQuerySqlTextProvider.js)
* Version:  21.2.7
* Build date: Apr 13, 2022
* Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED
* License: https://www.devexpress.com/Support/EULAs/universal.xml
*/
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var serializer_1 = require("../../../serializer/serializer");
var _infoMessageHelpers_1 = require("../../../core/utils/_infoMessageHelpers");
var SelectQuerySqlTextProvider = (function () {
    function SelectQuerySqlTextProvider(_selectStatementCallback, _connection) {
        this._selectStatementCallback = _selectStatementCallback;
        this._connection = _connection;
    }
    SelectQuerySqlTextProvider.prototype.getQuerySqlText = function (newQuery) {
        var queryJSON = JSON.stringify({ 'Query': new serializer_1.ModelSerializer().serialize(newQuery) });
        return this._selectStatementCallback(this._connection(), queryJSON)
            .fail(function (data) {
            var error = _infoMessageHelpers_1.getErrorMessage(data);
            _infoMessageHelpers_1.ShowMessage('Unable to build a SQL string' + (error ? ': ' + error : '.'));
        });
    };
    return SelectQuerySqlTextProvider;
}());
exports.SelectQuerySqlTextProvider = SelectQuerySqlTextProvider;
